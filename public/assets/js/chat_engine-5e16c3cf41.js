console.log("chat engine");class ChatEngine{constructor(e,o){this.chatBox=$(`#${e}`),this.userEmail=o,this.socket=io.connect("http://localhost:8000",{transports:["websocket","polling","flashsocket"]}),this.userEmail&&this.connectionHandler()}connectionHandler(){let n=this;this.socket.on("connect",function(){console.log("Connection established using sockets...!")}),n.socket.emit("join_room",{user_email:n.userEmail,room_id:"Socio chatroom"}),n.socket.on("user_join",function(e){console.log("A new user joined",e)}),$("#send-message").click(function(){var e=$("#message-input").val();console.log(e),""!=e&&n.socket.emit("send",{message:e,user_email:n.userEmail,room_id:"Socio chatroom"})}),n.socket.on("receive",function(e){console.log("Message : ",e.message);let o=$("<li>"),s="receive-message";e.user_email==n.userEmail&&(s="message-send"),o.append($("<span>",{html:e.message})),o.addClass(s),$(".message-list").append(o),updateScroll()})}}function updateScroll(){var e=document.getElementById("message-list-container");e.scrollTop=e.scrollHeight}